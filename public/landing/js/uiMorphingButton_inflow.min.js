!function(a){"use strict";function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function f(a,b){this.el=a,this.options=e({},this.options),e(this.options,b),this._init()}var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c=b[Modernizr.prefixed("transition")],d={transitions:Modernizr.csstransitions};f.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},f.prototype._init=function(){this.elH=this.el.offsetHeight,this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".morph-content"),this._initEvents()},f.prototype._initEvents=function(){var a=this;if(this.button.addEventListener("click",function(){a.toggle()}),""!==this.options.closeEl){var b=this.el.querySelector(this.options.closeEl);b&&b.addEventListener("click",function(){a.toggle()})}},f.prototype.toggle=function(){if(this.isAnimating)return!1;this.expanded?this.options.onBeforeClose():(classie.addClass(this.el,"active"),this.options.onBeforeOpen()),this.isAnimating=!0;var a=this,b=function(e){return e.target!==this?!1:(d.transitions&&this.removeEventListener(c,b),a.isAnimating=!1,a.expanded?(classie.removeClass(a.el,"active"),a.options.onAfterClose()):a.options.onAfterOpen(),void(a.expanded=!a.expanded))};d.transitions?this.el.addEventListener(c,b):b(),this.el.style.height=this.expanded?this.elH+"px":this.contentEl.offsetHeight+"px",this.expanded?classie.removeClass(this.el,"open"):classie.addClass(this.el,"open")},a.UIMorphingButton=f}(window);