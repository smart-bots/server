{"version":3,"sources":["jquery.quicksearch.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"jquery.quicksearch.js","sourcesContent":["(function($, window, document, undefined) {\r\n\t$.fn.quicksearch = function (target, opt) {\r\n\t\t\r\n\t\tvar timeout, cache, rowcache, jq_results, val = '', e = this, options = $.extend({ \r\n\t\t\tdelay: 100,\r\n\t\t\tselector: null,\r\n\t\t\tstripeRows: null,\r\n\t\t\tloader: null,\r\n\t\t\tnoResults: '',\r\n\t\t\tmatchedResultsCount: 0,\r\n\t\t\tbind: 'keyup',\r\n\t\t\tonBefore: function () { \r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tonAfter: function () { \r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tshow: function () {\r\n\t\t\t\tthis.style.display = \"\";\r\n\t\t\t},\r\n\t\t\thide: function () {\r\n\t\t\t\tthis.style.display = \"none\";\r\n\t\t\t},\r\n\t\t\tprepareQuery: function (val) {\r\n\t\t\t\treturn val.toLowerCase().split(' ');\r\n\t\t\t},\r\n\t\t\ttestQuery: function (query, txt, _row) {\r\n\t\t\t\tfor (var i = 0; i < query.length; i += 1) {\r\n\t\t\t\t\tif (txt.indexOf(query[i]) === -1) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, opt);\r\n\t\t\r\n\t\tthis.go = function () {\r\n\t\t\t\r\n\t\t\tvar i = 0,\r\n\t\t\t\tnumMatchedRows = 0,\r\n\t\t\t\tnoresults = true, \r\n\t\t\t\tquery = options.prepareQuery(val),\r\n\t\t\t\tval_empty = (val.replace(' ', '').length === 0);\r\n\t\t\t\r\n\t\t\tfor (var i = 0, len = rowcache.length; i < len; i++) {\r\n\t\t\t\tif (val_empty || options.testQuery(query, cache[i], rowcache[i])) {\r\n\t\t\t\t\toptions.show.apply(rowcache[i]);\r\n\t\t\t\t\tnoresults = false;\r\n\t\t\t\t\tnumMatchedRows++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.hide.apply(rowcache[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (noresults) {\r\n\t\t\t\tthis.results(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.results(true);\r\n\t\t\t\tthis.stripe();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.matchedResultsCount = numMatchedRows;\r\n\t\t\tthis.loader(false);\r\n\t\t\toptions.onAfter();\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t\r\n\t\t/*\r\n\t\t * External API so that users can perform search programatically. \r\n\t\t * */\r\n\t\tthis.search = function (submittedVal) {\r\n\t\t\tval = submittedVal;\r\n\t\t\te.trigger();\r\n\t\t};\r\n\t\t\r\n\t\t/*\r\n\t\t * External API to get the number of matched results as seen in \r\n\t\t * https://github.com/ruiz107/quicksearch/commit/f78dc440b42d95ce9caed1d087174dd4359982d6\r\n\t\t * */\r\n\t\tthis.currentMatchedResults = function() {\r\n\t\t\treturn this.matchedResultsCount;\r\n\t\t};\r\n\t\t\r\n\t\tthis.stripe = function () {\r\n\t\t\t\r\n\t\t\tif (typeof options.stripeRows === \"object\" && options.stripeRows !== null)\r\n\t\t\t{\r\n\t\t\t\tvar joined = options.stripeRows.join(' ');\r\n\t\t\t\tvar stripeRows_length = options.stripeRows.length;\r\n\t\t\t\t\r\n\t\t\t\tjq_results.not(':hidden').each(function (i) {\r\n\t\t\t\t\t$(this).removeClass(joined).addClass(options.stripeRows[i % stripeRows_length]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t\r\n\t\tthis.strip_html = function (input) {\r\n\t\t\tvar output = input.replace(new RegExp('<[^<]+\\>', 'g'), \"\");\r\n\t\t\toutput = $.trim(output.toLowerCase());\r\n\t\t\treturn output;\r\n\t\t};\r\n\t\t\r\n\t\tthis.results = function (bool) {\r\n\t\t\tif (typeof options.noResults === \"string\" && options.noResults !== \"\") {\r\n\t\t\t\tif (bool) {\r\n\t\t\t\t\t$(options.noResults).hide();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(options.noResults).show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t\r\n\t\tthis.loader = function (bool) {\r\n\t\t\tif (typeof options.loader === \"string\" && options.loader !== \"\") {\r\n\t\t\t\t (bool) ? $(options.loader).show() : $(options.loader).hide();\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t\r\n\t\tthis.cache = function () {\r\n\t\t\t\r\n\t\t\tjq_results = $(target);\r\n\t\t\t\r\n\t\t\tif (typeof options.noResults === \"string\" && options.noResults !== \"\") {\r\n\t\t\t\tjq_results = jq_results.not(options.noResults);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar t = (typeof options.selector === \"string\") ? jq_results.find(options.selector) : $(target).not(options.noResults);\r\n\t\t\tcache = t.map(function () {\r\n\t\t\t\treturn e.strip_html(this.innerHTML);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\trowcache = jq_results.map(function () {\r\n\t\t\t\treturn this;\r\n\t\t\t});\r\n\r\n\t\t\t/*\r\n\t\t\t * Modified fix for sync-ing \"val\". \r\n\t\t\t * Original fix https://github.com/michaellwest/quicksearch/commit/4ace4008d079298a01f97f885ba8fa956a9703d1\r\n\t\t\t * */\r\n\t\t\tval = val || this.val() || \"\";\r\n\t\t\t\r\n\t\t\treturn this.go();\r\n\t\t};\r\n\t\t\r\n\t\tthis.trigger = function () {\r\n\t\t\tthis.loader(true);\r\n\t\t\toptions.onBefore();\r\n\t\t\t\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\ttimeout = window.setTimeout(function () {\r\n\t\t\t\te.go();\r\n\t\t\t}, options.delay);\r\n\t\t\t\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t\r\n\t\tthis.cache();\r\n\t\tthis.results(true);\r\n\t\tthis.stripe();\r\n\t\tthis.loader(false);\r\n\t\t\r\n\t\treturn this.each(function () {\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\t * Changed from .bind to .on.\r\n\t\t\t * */\r\n\t\t\t$(this).on(options.bind, function () {\r\n\t\t\t\t\r\n\t\t\t\tval = $(this).val();\r\n\t\t\t\te.trigger();\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t};\r\n\r\n}(jQuery, this, document));\r\n"],"sourceRoot":"/source/"}